<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Community Member</title>
    <link rel="stylesheet" href="../css/login.css">
    <script type="text/javascript" src="../js/validation.js" defer></script>
</head>

<body>
    <script type="module">
        import { member_sign_up } from '../backend/database/member-signup.js';

        document.getElementById('signup-btn').addEventListener('click', async (event) => {
            event.preventDefault(); 

            const firstName = document.getElementById('name-input').value;
            const lastName = document.getElementById('last-name-input').value;
            const result = await member_sign_up(firstName, lastName);

            const messageElement = document.getElementById('error-message');
            if (result.success) {
                messageElement.style.color = 'green';
            } else {
                messageElement.style.color = 'red';
            }

            messageElement.textContent = result.message;
        });
    </script>

    <div class="wrapper">
        <h1>Add New Member</h1>
        <p> To add a new member to your community, all you need to do is input their first and last name. We'll generate a username and password for them to use.
            You can access this username and password for administration reasons through your Community Leader dashboard.
        </p>
        <form id="form">
            <div>
                <label for="first-name-input">First Name</label>
                <input required type="text" name="name" id="name-input" placeholder="Member's First Name">
            </div>
            <div>
                <label for="last-name-input">Last Name</label>
                <input required type="text" name="name" id="last-name-input" placeholder="Member's Last Name">
            </div>
            <button type="submit" id="signup-btn">
                Add New Community member
            </button>
            <p id="error-message"></p>
        </form>
    </div>
</body>

</html>